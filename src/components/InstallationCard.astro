---
import "../styles/style.css";
const { data, navigation } = Astro.props;
---

<article>
  <div class="nr1">
    <img class="card-bg" src={data.image} alt={data.name} />
    <div class="content-overlay">
      <h4>{data.name}</h4>
      <p>{data.date}</p>
    </div>
    <div class="card_bund">
      <button data-modal-target="modal1">Learn more <i class="fa-solid fa-chevron-right fa-0.5x" style="color: #ffffff;"></i> </button>
    </div>
    <div class="modal" id="modal1">
      <div class="modal-content">
        <div class="modal-content-padding">
          <div class="fifty_width">
            <img src="/clf-images/600/1-du-som-er-i-himlene.webp" alt="Installation 1" />
            <div>
              <i></i>
              <p>@marienoergaardnielsen</p>
            </div>
            <div>
              <i></i>
              <p>@maninikdelstudio</p>
            </div>
          </div>
          <div class="fifty_width">
            <span class="modal-close">&times;</span>
            <h2>Du som er i Himlene!</h2>
            <p class="tagline">Artist: Marie Nørgaard (DK)</p>
            <h3>Location: Højbro Plads</h3>
            <h4>About:</h4>
            <p>
              This piece establishes a connection between the ground below us and the Heavens above. Between the physical and the spiritual. A surrender to something higher than us. A place for you to connect with what you truly believe in.
              <br /><br />Marie Nørgaard Nielsen is a Danish textile artist, who has previously participated in Copenhagen Light Festival with Oraklet in 2022 and På den anden side af Solen, which was also part of the Light Art Grindelwald festival in the Swiss Alps later that year.
              <br /><br />Mani Nikdel is an Iranian designer and artist, who lives in Århus, Denmark. He participated in Copenhagen Light Festival in 2022 with Transcendence and in 2023 with Terra.
            </p>
          </div>
        </div>
      </div>
    </div>
  </div>
</article>

<style>
  .modal {
    position: fixed;
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    display: none;
    justify-content: center;
    align-items: flex-start; /* or center */
    z-index: 1000; /* depending on what z-index values exist in your page, in order for the modal layer to sit on top of other content */
    overflow: auto; /* enable scrolling if needed - although this is not really necessary since we are going take care of overflow in modal-content */
    background-color: rgba(0, 0, 0, 0.8);
  }
  .modal.modal-show {
    animation: fadeIn 0.1s ease-in-out forwards;
  }
  .modal.modal-hide {
    animation: fadeOut 0.1s ease-in-out 0.1s forwards;
  }
  .modal-content {
    position: relative;
    background-color: var(--body-color);
    margin: 2rem;
    padding: 2rem;
    border: solid white 1px;
    border-image: var(--gradient-color) 1;
    width: 88%;
    max-height: 80%;
    overflow: auto;
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.4);
  }
  .modal-content-padding {
    padding: 40px;
    gap: 40px;
  }
  .modal.modal-show .modal-content {
    animation: fadeInDown 0.3s ease-in-out forwards;
  }
  .modal.modal-hide .modal-content {
    animation: fadeOutUp 0.2s ease-in-out forwards;
  }

  .fifty_width img {
    height: 500px;
  }
  .modal-content h2,
  h3 {
    margin-bottom: 2rem;
  }

  .modal-content p {
    margin: 1rem 0;
    line-height: 1.5rem;
  }

  .modal-close {
    position: absolute;
    top: 3.5%;
    right: 2%;
    font-size: 1.75rem;
    font-weight: bold;
    padding: 0 0.75rem;
    color: var(--text-color);
    cursor: pointer;
    user-select: none;
  }
  .modal-close:hover,
  .modal-close:focus {
    color: var(--action-color);
  }

  /* Animations */
  @keyframes fadeIn {
    0% {
      opacity: 0;
    }
    100% {
      opacity: 1;
    }
  }
  @keyframes fadeOut {
    0% {
      opacity: 1;
    }
    100% {
      opacity: 0;
    }
  }
  @keyframes fadeInDown {
    0% {
      opacity: 0;
      transform: translateY(-3rem);
    }
    100% {
      opacity: 1;
      transform: translateY(0);
    }
  }
  @keyframes fadeOutUp {
    0% {
      opacity: 1;
      transform: translateY(0);
    }
    100% {
      opacity: 0;
      transform: translateY(-3rem);
    }
  }

  @media (max-width: 992px) {
    .modal-content {
      width: 80%;
    }
  }
  @media (max-width: 767px) {
    .modal-content {
      padding: 2rem 1rem 1rem 1rem;
      width: 90%;
    }
    .modal-content h1 {
      margin-bottom: 1.5rem;
    }
  }
  article {
    border: solid white 1px;
  }

  .nr1 {
    position: relative;
  }

  .card-bg {
    width: 100%;
    aspect-ratio: 3.5/5;
    object-fit: cover;
    filter: brightness(50%);
  }

  .card-bg:hover {
    filter: none;
    border: solid white 1px;
    border-image: var(--gradient-color) 1;
    transform: scale(1.03);
  }

  .content-overlay {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 10px;
    text-align: center;
  }

  .card_bund button {
    position: absolute;
    bottom: 10px;
    left: 20px;
    display: inline-block;
    font-size: 1rem;
    color: var(--text-color);
    text-decoration: none;
    cursor: pointer;
    transition: all 0.55s ease;
    border: none;
    background: none;
    padding: 12px 0px;
  }
  .card_bund button:hover {
    transform: scale(1.1);
  }

  /* ___________________________ DESKTOP  ___________________________*/
  @media screen and (min-width: 1024px) {
    .modal-content-padding {
      display: flex;
    }
    .fifty_width {
      width: 50%;
    }
  }
</style>

<script>
  const modalTriggerButtons = document.querySelectorAll("[data-modal-target]");
  const modals = document.querySelectorAll(".modal");
  const modalCloseButtons = document.querySelectorAll(".modal-close");

  modalTriggerButtons.forEach((elem) => {
    elem.addEventListener("click", (event) => {
      event.preventDefault(); // Stop default link behavior
      toggleModal(event.currentTarget.getAttribute("data-modal-target"));
    });
  });

  modalCloseButtons.forEach((elem) => {
    elem.addEventListener("click", (event) => {
      toggleModal(event.currentTarget.closest(".modal").id);
    });
  });

  modals.forEach((elem) => {
    elem.addEventListener("click", (event) => {
      if (event.currentTarget === event.target) {
        toggleModal(event.currentTarget.id);
      }
    });
  });

  // Maybe also close with "Esc"...
  document.addEventListener("keydown", (event) => {
    if (event.keyCode === 27 && document.querySelector(".modal.modal-show")) {
      toggleModal(document.querySelector(".modal.modal-show").id);
    }
  });

  function toggleModal(modalId) {
    const modal = document.getElementById(modalId);

    if (getComputedStyle(modal).display === "flex") {
      // alternatively: if(modal.classList.contains("modal-show"))
      modal.classList.add("modal-hide");
      setTimeout(() => {
        document.body.style.overflow = "initial"; // Optional: in order to enable/disable page scrolling while modal is hidden/shown - in this case: "initial" <=> "visible"
        modal.classList.remove("modal-show", "modal-hide");
        modal.style.display = "none";
      }, 200);
    } else {
      document.body.style.overflow = "hidden"; // Optional: in order to enable/disable page scrolling while modal is hidden/shown
      modal.style.display = "flex";
      modal.classList.add("modal-show");
    }
  }
</script>
